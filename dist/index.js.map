{"version":3,"sources":["../src/index.js"],"names":["ZeroPaper","username","password","credentials","url","method","headers","intuit_sessionid","body","JSON","stringify","response","json","isLoggedIn","loginToken","iamTicket","ticket","companyId","start","end","query","querystring","company_id","Authorization","id","ok"],"mappings":";;;;;;;AAAA;;AACA;;;;;;;;;;;;;;;;IAEqBA,S;;;AAKnB,2BAAoC;AAAA,QAAtBC,QAAsB,QAAtBA,QAAsB;AAAA,QAAZC,QAAY,QAAZA,QAAY;;AAAA;;AAAA,yCAJtB,IAIsB;;AAAA,wCAFvB,IAEuB;;AAClC,SAAKC,WAAL,GAAmB;AAAEF,MAAAA,QAAQ,EAARA,QAAF;AAAYC,MAAAA,QAAQ,EAARA;AAAZ,KAAnB;AACD;;;;;;;;;;;;;AAGOE,gBAAAA,G,GAAM,yD;;uBACW,wBAAMA,GAAN,EAAW;AAChCC,kBAAAA,MAAM,EAAE,MADwB;AAEhCC,kBAAAA,OAAO,EAAE;AACP,oCAAgB,mBADT;AAEPC,oBAAAA,gBAAgB,EAAE;AAFX,mBAFuB;AAMhCC,kBAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe,KAAKP,WAApB;AAN0B,iBAAX,C;;;AAAjBQ,gBAAAA,Q;;uBASaA,QAAQ,CAACC,IAAT,E;;;AAAbA,gBAAAA,I;AAEN,qBAAKC,UAAL,GAAkB,IAAlB;AACA,qBAAKC,UAAL,GAAkBF,IAAI,CAACG,SAAL,CAAeC,MAAjC;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGsBC,gBAAAA,S,SAAAA,S,EAAWC,K,SAAAA,K,EAAOC,G,SAAAA,G;AAClCC,gBAAAA,K,GAAQC,qBAAYX,SAAZ,CAAsB;AAClCY,kBAAAA,UAAU,EAAEL,SADsB;AAElC,wCAAsBC,KAFY;AAGlC,sCAAoBC;AAHc,iBAAtB,C;AAMRf,gBAAAA,G,0DAAsDgB,K;;uBAErC,wBAAMhB,GAAN,EAAW;AAChCE,kBAAAA,OAAO,EAAE;AACP,yCACE,kEAFK;AAGPiB,oBAAAA,aAAa,iFACX,KAAKT,UADM;AAHN;AADuB,iBAAX,C;;;AAAjBH,gBAAAA,Q;;uBAUaA,QAAQ,CAACC,IAAT,E;;;AAAbA,gBAAAA,I;kDAECA,IAAI,CAACD,Q;;;;;;;;;;;;;;;;;;;;;gDAGUa,E,EAAIhB,I;;;;;;AACpBJ,gBAAAA,G,0DAAsDoB,E;;uBAErC,wBAAMpB,GAAN,EAAW;AAChCC,kBAAAA,MAAM,EAAE,OADwB;AAEhCG,kBAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeF,IAAf,CAF0B;AAGhCF,kBAAAA,OAAO,EAAE;AACP,yCACE,kEAFK;AAGPiB,oBAAAA,aAAa,iFACX,KAAKT,UADM;AAHN;AAHuB,iBAAX,C;;;AAAjBH,gBAAAA,Q;kDAYCA,QAAQ,CAACc,E","sourcesContent":["import fetch from 'node-fetch';\nimport querystring from 'querystring';\n\nexport default class ZeroPaper {\n  credentials = null;\n\n  loginToken = null;\n\n  constructor({ username, password }) {\n    this.credentials = { username, password };\n  }\n\n  async login() {\n    const url = 'https://accounts.zeropaper.com.br/access_client/sign_in';\n    const response = await fetch(url, {\n      method: 'POST',\n      headers: {\n        'Content-Type': ' application/json',\n        intuit_sessionid: 'ACBDC15C8FE44B5AA8482812CB6541CA',\n      },\n      body: JSON.stringify(this.credentials),\n    });\n\n    const json = await response.json();\n\n    this.isLoggedIn = true;\n    this.loginToken = json.iamTicket.ticket;\n  }\n\n  async getTransactions({ companyId, start, end }) {\n    const query = querystring.stringify({\n      company_id: companyId,\n      'filter[start_date]': start,\n      'filter[end_date]': end,\n    });\n\n    const url = `https://api.zeropaper.com.br/v2/transactions?${query}`;\n\n    const response = await fetch(url, {\n      headers: {\n        'X-Application-Uid':\n          '73d4a5202a0101df4ccd770fd645f9b53e2d1efd3108748a122ff5bafe10a6ab',\n        Authorization: `Intuit_IAM_Authentication intuit_userid=193514544004679,intuit_token=${\n          this.loginToken\n        },intuit_realmid=193514586571929`,\n      },\n    });\n\n    const json = await response.json();\n\n    return json.response;\n  }\n\n  async updateTransaction(id, body) {\n    const url = `https://api.zeropaper.com.br/v1/transactions/${id}`;\n\n    const response = await fetch(url, {\n      method: 'PATCH',\n      body: JSON.stringify(body),\n      headers: {\n        'X-Application-Uid':\n          '73d4a5202a0101df4ccd770fd645f9b53e2d1efd3108748a122ff5bafe10a6ab',\n        Authorization: `Intuit_IAM_Authentication intuit_userid=193514544004679,intuit_token=${\n          this.loginToken\n        },intuit_realmid=193514586571929`,\n      },\n    });\n\n    return response.ok;\n  }\n}\n"],"file":"index.js"}